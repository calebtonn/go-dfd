kind: pipeline
name: default

steps:
  - name: vet
    image: golang:1.11-stretch
    environment:
      DEP_VERSION: 0.5.0
    pull: always
    commands:
      - ./.prep_drone.sh
      - go vet go-dfd/dfd
  - name: race
    image: golang:1.11-stretch
    pull: always
    environment:
      DEP_VERSION: 0.5.0
    commands:
      - ./.prep_drone.sh
      - go test -race go-dfd/dfd
  - name: test
    image: golang:1.11-stretch
    pull: always
    environment:
      DEP_VERSION: 0.5.0
    commands:
      - ./.prep_drone.sh
      - go test -cover go-dfd/dfd
